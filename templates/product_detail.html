{% extends 'base.html' %} {% block content %}
<div class="product-detail">
    <h1>{{ product.name }}</h1>
    <p>Price: {{ product.price }}</p>
    <p>Likes: {{ product.likes.count }}</p>
    <button onclick="likeProduct({{ product.pk }})">Like</button>
</div>


<div class="comments">
    <h2>Comments</h2>
    <ul>
        {% for comment in comments %}
        <li>{{ comment.body }}</li>
        {% endfor %}
    </ul>
    <form method="post" action="{% url 'product_detail' product.pk %}">
        {% csrf_token %}
        {{ comment_form.as_p }}
        <button type="submit">Submit Comment</button>
    </form>
</div>

<script>
    function likeProduct(pk) {
        fetch("{% url 'like_product' pk %}", { method: "POST", credentials: "same-origin" })
            .then(response => {
                if (response.ok) {
                    // Update like count or UI as needed
                }
            });
    }
</script>
{% endblock content %}